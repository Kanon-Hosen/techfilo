"use strict";(()=>{var e={};e.id=7731,e.ids=[7731],e.modules={38013:e=>{e.exports=require("mongodb")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},969:(e,s,t)=>{t.r(s),t.d(s,{headerHooks:()=>g,originalPathname:()=>f,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>d,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>m});var r={};t.r(r),t.d(r,{GET:()=>GET,POST:()=>POST});var o=t(10884),a=t(16132),n=t(96721),i=t(64963);let u=i.client.db("itinstitute").collection("Portfolio"),GET=async e=>{let s=new URL(e?.url),t=s.searchParams.get("category");try{if("All"===t){let e=await u?.find({}).toArray();return Response.json({success:!0,message:"Successfully get portfolio items",data:e},{status:200})}let e=await u?.find({category:t}).toArray();return Response.json({success:!0,message:"Successfully get portfolio items",data:e},{status:200})}catch(e){return Response.json({success:!1,message:e?.message,data:[]})}},POST=async e=>{let s=await e?.json(),t=await e?.headers.get("authorization"),r=await e?.headers.get("email"),o=t?.split(" ")[1];if(console.log(o),!r)return Response.json({errorMessage:"Email not found"},{status:404});n.verify(o,process.env.JWT_SECRET_KEY,async(e,s)=>{if(e)return Response.json({errorMessage:"Unauthorized user"},{status:401});let t=s?.email;if(console.log("d",t),t!==r)return Response.json({errorMessage:"Unauthorized user"},{status:401})});try{let e=await u.insertOne(s);return Response.json({success:!0,message:"Success",data:e},{status:200})}catch(e){return Response.json({success:!1,message:"Unsuccessfull",data:null})}},c=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/portfolio/route",pathname:"/api/portfolio",filename:"route",bundlePath:"app/api/portfolio/route"},resolvedPagePath:"D:\\Sayem\\Techfilo Agency\\techfilo\\app\\api\\portfolio\\route.js",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:d,headerHooks:g,staticGenerationBailout:m}=c,f="/api/portfolio/route"},64963:(e,s,t)=>{let{MongoClient:r,ServerApiVersion:o}=t(38013),a=`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.we2oxi5.mongodb.net/?retryWrites=true&w=majority `,n=new r(a,{serverApi:o.v1}),db=async()=>{try{await n.connect(),console.log("Database Connected")}catch(e){console.log(e.message)}};e.exports={db,client:n}}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[1249,3247],()=>__webpack_exec__(969));module.exports=t})();