"use strict";(()=>{var e={};e.id=560,e.ids=[560],e.modules={38013:e=>{e.exports=require("mongodb")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},23034:(e,s,t)=>{t.r(s),t.d(s,{headerHooks:()=>m,originalPathname:()=>y,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>d,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>g});var r={};t.r(r),t.d(r,{GET:()=>GET,POST:()=>POST});var a=t(10884),o=t(16132),n=t(64963),i=t(96721);let u=n.client.db("itinstitute").collection("Testimonial"),GET=async()=>{try{let e=await u.find({}).toArray(),s=[...e].reverse();return Response.json({success:!0,message:"successfully get data",data:s},{status:200})}catch(e){return Response.json({success:!1,message:e.message,data:[]})}},POST=async e=>{let s=await e?.headers.get("authorization"),t=await e?.headers.get("email"),r=s?.split(" ")[1];if(console.log(r),!t)return Response.json({errorMessage:"Email not found"},{status:404});i.verify(r,process.env.JWT_SECRET_KEY,async(e,s)=>{if(e)return Response.json({errorMessage:"Unauthorized user"},{status:401});let r=s?.email;if(console.log("d",r),r!==t)return Response.json({errorMessage:"Unauthorized user"},{status:401})});try{let s=await e?.json(),t=await u.insertOne(s);return Response.json({success:!0,message:t?.acknowledged,data:t},{status:200})}catch(e){return Response.json({success:!1,message:e?.message,data:null})}},c=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/testimonial/route",pathname:"/api/testimonial",filename:"route",bundlePath:"app/api/testimonial/route"},resolvedPagePath:"D:\\Sayem\\Techfilo Agency\\techfilo\\app\\api\\testimonial\\route.js",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:d,headerHooks:m,staticGenerationBailout:g}=c,y="/api/testimonial/route"},64963:(e,s,t)=>{let{MongoClient:r,ServerApiVersion:a}=t(38013),o=`mongodb+srv://${process.env.DB_USERNAME}:${process.env.DB_PASSWORD}@cluster0.we2oxi5.mongodb.net/?retryWrites=true&w=majority `,n=new r(o,{serverApi:a.v1}),db=async()=>{try{await n.connect(),console.log("Database Connected")}catch(e){console.log(e.message)}};e.exports={db,client:n}}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[1249,3247],()=>__webpack_exec__(23034));module.exports=t})();